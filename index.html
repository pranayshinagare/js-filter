<!DOCTYPE html>
<html>
	<head>
		<title>JSON Data with loops</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.3/toastr.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.3/toastr.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function(){
        var names;
			  $.ajax({
			  	url: 'https://data.cityofnewyork.us/resource/5scm-b38n.json',
			  	data: {},
			  	datatype: 'JSON',
			  	method: 'GET',
			  	success: function(response){
			  		names = response;
			  	},
			  	error: function(error){
			  		alert(error);
			  	},
			  	always: function(){
			  		console.log("Ajax loaded Successfully!!");
				  }
			  });

        $('#search_button').click(function(){
          var searchField = $('#txt-search').val();
          if(searchField === '')  {
            $('#filter-records').html('No data found');
            return;
          }
          
            var regex = new RegExp(searchField, "i");
            var output = '<table class="table table-bordered table-responsive margin-top20">';
                output += '<tr>';
                output += '<th>List No.</th>';
                output += '<th>Exam No.</th>';
                output += '<th>First Name</th>';
                output += '<th>Last Name</th>';
                output += '<th>List agancy desc</th>';
                output += '<th>Published Date</th>';
                output += '<th>Title disc</th>';
                output += '</tr>';
            $.each(names, function(key, val){
              if ((val.first_name.search(regex) != -1) || (val.last_name.search(regex) != -1)) {
                
                output += '<tr>';
                output += '<td>' + val.list_no + '</td>';
                output += '<td>' + val.exam_no + '</td>';
                output += '<td>' + val.first_name + '</td>';
                output += '<td>' + val.last_name + '</td>';
                output += '<td>' + val.list_agency_desc + '</td>';
                output += '<td>' + val.published_date + '</td>';
                output += '<td>' + val.list_title_desc + '</td>';
                output += '</tr>';
              }
            });
            output += '</table>';
            $('#filter-records').html(output);
            });
			});
		</script>
    <style type="text/css">
      .form-control:focus{
        box-shadow: none !important;
        outline: none;
        border-color: #66afe9;
      }
      .form-control{
        border-radius: 0;
      }
      .margin-top20{
        margin-top: 20px;
      }
    </style>
	</head>
	<body >
	  <div class="container" style="margin-top: 10px">
     <div class="input-group">
       <input type="text" class="form-control" id="txt-search" placeholder="Type name or surname">
       <span class="input-group-btn">
            <button class="btn btn-default" id="search_button" type="button">Search</button>
       </span>
    </div>
     <div id="filter-records"></div>
	</body>
</html>